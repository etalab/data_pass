[
  {
    "id": 2660989145,
    "path": "CLAUDE.md",
    "line": 21,
    "original_line": 21,
    "body": "(J'pense qu'on peut avancer avec mes suggestions, Eva est encore en cong√© cette semaine)",
    "diff_hunk": "@@ -21,8 +21,12 @@\n - Naming: snake_case for methods/variables, CamelCase for classes"
  },
  {
    "id": 2661477864,
    "path": "app/controllers/concerns/authorization_requests_flashes.rb",
    "line": 6,
    "original_line": 6,
    "body": "Alors pourquoi avoir \n```ruby \ndef success_message_for_authorization_request(authorization_request, key:)\n    message_for_authorization_request(authorization_request, key:, type: :success)\n  end\n\n  def success_message_for_building_authorization_request(authorization_request, key:)\n    message_for_authorization_request(authorization_request, key:, type: :success, tiny: true)\n  end \n```\n\nAlors que l'on pourrait avoir qu'une seule m√©thode ?\n```ruby\ndef success_message_for_authorization_request(authorization_request, key:, tiny: false)\n  message_for_authorization_request(\n    authorization_request,\n    key: key,\n    type: :success,\n    tiny: tiny\n  )\nend\n```\n\net dans les controllers on pourrait avoir \n```ruby\nif organizer.success?\n  unless next_submit?\n    success_message_for_authorization_request(\n      @authorization_request,\n      key: \"authorization_request_forms.create\",\n      tiny: true\n    )\n  end\n```\n",
    "diff_hunk": "@@ -3,22 +3,26 @@ def success_message_for_authorization_request(authorization_request, key:)\n     message_for_authorization_request(authorization_request, key:, type: :success)\n   end\n \n+  def success_message_for_building_authorization_request(authorization_request, key:)"
  },
  {
    "id": 2661590856,
    "path": "app/views/shared/_alerts.html.erb",
    "line": 3,
    "original_line": 3,
    "body": "Suggestion : On peut refactoriser pour appliquer le principe de l'Atomic Design System ici.  \n\nLe code est bien trop complexe pour cette vue et pourrait √™tre drastiquement simplifi√©. \n\n Structure propos√©e\n\n  Atoms : dsfr_alert (fourni par la gem DSFR)\n  Molecules : FlashAlertComponent (nouveau composant √† cr√©er)\n  Usage : Template simple qui it√®re sur les flash messages\n\nDans la vue, on n'aurait plus de complexit√© √† g√©rer mais juste quelque chose comme \n\n```html.erb \n app/views/shared/_alerts.html.erb :\n  <% %i[error info success warning].each do |kind| %>\n    <% if flash[kind].present? %>\n      <%= render FlashAlertComponent.new(\n        type: kind,\n        data: flash[kind],\n        close_button: local_assigns.fetch(:close_button, true)\n      ) %>\n    <% end %>\n  <% end %>\n```\n\n",
    "diff_hunk": "@@ -1,25 +1,22 @@\n <% %i[error info success warning].each do |kind| %>\n   <% if flash[kind].present? %>\n-    <div class=\"fr-alert fr-alert--<%= kind %> fr-my-8v\" id=\"<%= flash[kind]['id'] %>\">\n-      <h3 class=\"fr-alert__title\">\n+    <% if flash[kind]['tiny'] %>"
  },
  {
    "id": 2661602525,
    "path": "config/locales/fr.yml",
    "line": 451,
    "original_line": 451,
    "body": "Il manque la majuscule de d√©but de phrase. ",
    "diff_hunk": "@@ -459,7 +448,7 @@ fr:\n \n   demandes_habilitations:\n     current_user_mentions_alert:\n-      text: Vous avez √©t√© r√©f√©renc√© comme %{contact_types} dans cette habilitation.\n+      text: vous avez √©t√© r√©f√©renc√© comme %{contact_types}."
  },
  {
    "id": 2661654773,
    "path": "app/assets/stylesheets/components/notice_full_width.css",
    "line": 1,
    "original_line": 1,
    "body": "Je pense qu'il serait pr√©f√©rable de d√©placer ce code dans `app/assets/stylesheets/dsfr-extensions.css`\n",
    "diff_hunk": "@@ -0,0 +1,10 @@\n+.fr-notice--full-width {"
  },
  {
    "id": 2661655443,
    "path": "app/assets/stylesheets/components/tiny_alerts.css",
    "line": 1,
    "original_line": 1,
    "body": "De m√™me que plus haut: \nIl faudrait le d√©placer dans `app/assets/stylesheets/dsfr-extensions.css`",
    "diff_hunk": "@@ -0,0 +1,5 @@\n+.fr-alert.fr-alert--tiny {"
  },
  {
    "id": 2661695146,
    "path": "app/components/applicant/demande_alerts_component.rb",
    "line": 4,
    "original_line": 4,
    "body": "Suggestion: Ce component est encore trop complexe, il g√®re 4 types d'alertes diff√©rentes dans une seule classe et pourrait √™tre d'avantage d√©coup√© en suivant le principe d'Atomic Design Pattern. \n\nLes alertes comme `InstructorBanner` ou `UpdateInProgress` pourraient √™tre utiles dans d'autres contextes. \n\non pourrait faire un d√©coupage de ce type : \n```md\n  **Structure propos√©e :**\n  app/components/\n  ‚îú‚îÄ‚îÄ molecules/\n  ‚îÇ   ‚îú‚îÄ‚îÄ instructor_banner_notice_component.rb\n  ‚îÇ   ‚îî‚îÄ‚îÄ update_in_progress_notice_component.rb\n  ‚îî‚îÄ‚îÄ organisms/\n      ‚îî‚îÄ‚îÄ applicant/\n          ‚îî‚îÄ‚îÄ demande_alerts_component.rb\n```\n\n\n\n\n\n",
    "diff_hunk": "@@ -0,0 +1,148 @@\n+class Applicant::DemandeAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization_request:, current_user:, authorization: nil)"
  },
  {
    "id": 2661771870,
    "path": "app/components/applicant/demande_alerts_component.rb",
    "line": 96,
    "original_line": 96,
    "body": "Suggestion: \nRemplacer html_safe par des helpers Rails s√©curis√©s. \n\nQuelque chose comme \n```ruby\n    safe_join([\n      instructor_banner_description,\n      tag.br,\n      simple_format(instructor_banner_reason, {}, wrapper_tag: 'span')\n    ])\n```\n",
    "diff_hunk": "@@ -0,0 +1,148 @@\n+class Applicant::DemandeAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization_request:, current_user:, authorization: nil)\n+    @authorization_request = authorization_request\n+    @current_user = current_user\n+    @authorization = authorization\n+    super()\n+  end\n+\n+  def render?\n+    show_instructor_banner? ||\n+      show_dirty_from_v1_alert? ||\n+      show_update_in_progress_alert? ||\n+      show_summary_before_submit?\n+  end\n+\n+  def call\n+    safe_join([\n+      summary_before_submit_notice,\n+      instructor_banner_notice,\n+      dirty_from_v1_alert,\n+      update_in_progress_notice\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization_request, :current_user\n+\n+  def summary_before_submit_notice\n+    return unless show_summary_before_submit?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.title'),\n+      description: I18n.t('authorization_request_forms.summary.description'),\n+      type: 'warning',\n+      html_attributes: { class: 'fr-mb-4w fr-px-4v' }\n+    )\n+  end\n+\n+  def show_summary_before_submit?\n+    authorization_request.draft? &&\n+      current_user_is_applicant?\n+  end\n+\n+  def current_user_is_applicant?\n+    authorization_request.applicant == current_user\n+  end\n+\n+  def instructor_banner_notice\n+    return unless show_instructor_banner?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: instructor_banner_title,\n+      description: instructor_banner_full_description,\n+      type: instructor_banner_type.to_s,\n+      html_attributes: { class: 'fr-notice--full-width fr-notice--multi-lines fr-mb-4w' }\n+    )\n+  end\n+\n+  def show_instructor_banner?\n+    authorization_request.changes_requested? || authorization_request.refused?\n+  end\n+\n+  def instructor_banner_type\n+    return :alert if authorization_request.refused? || (authorization_request.reopening? && authorization_request.denial.present?)\n+    return :warning if authorization_request.changes_requested?\n+\n+    nil\n+  end\n+\n+  def instructor_banner_title\n+    I18n.t(\"#{instructor_banner_i18n_key}.title\")\n+  end\n+\n+  def instructor_banner_description\n+    I18n.t(\"#{instructor_banner_i18n_key}.description\")\n+  end\n+\n+  def instructor_banner_reason\n+    return authorization_request.modification_request&.reason if authorization_request.changes_requested?\n+    return authorization_request.denial&.reason if instructor_banner_type == :alert\n+\n+    nil\n+  end\n+\n+  def instructor_banner_full_description\n+    description = instructor_banner_description\n+    return description if instructor_banner_reason.blank?\n+\n+    helpers.safe_join([\n+      description,\n+      '<br />'.html_safe,"
  },
  {
    "id": 2661777771,
    "path": "app/components/applicant/demande_alerts_component.rb",
    "line": 118,
    "original_line": 118,
    "body": "Suggestion: \nExtraire toutes les classes CSS en constante. \n\npar exemple: \n```ruby\n NOTICE_FULL_WIDTH_CLASSES = 'fr-notice--full-width fr-notice--multi-lines fr-mb-4w'\n    NOTICE_STANDARD_CLASSES = 'fr-mb-4w fr-px-4v'\n\n    # ...\n\n    html_attributes: { class: NOTICE_FULL_WIDTH_CLASSES }\n    html_attributes: { class: NOTICE_STANDARD_CLASSES }\n```",
    "diff_hunk": "@@ -0,0 +1,148 @@\n+class Applicant::DemandeAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization_request:, current_user:, authorization: nil)\n+    @authorization_request = authorization_request\n+    @current_user = current_user\n+    @authorization = authorization\n+    super()\n+  end\n+\n+  def render?\n+    show_instructor_banner? ||\n+      show_dirty_from_v1_alert? ||\n+      show_update_in_progress_alert? ||\n+      show_summary_before_submit?\n+  end\n+\n+  def call\n+    safe_join([\n+      summary_before_submit_notice,\n+      instructor_banner_notice,\n+      dirty_from_v1_alert,\n+      update_in_progress_notice\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization_request, :current_user\n+\n+  def summary_before_submit_notice\n+    return unless show_summary_before_submit?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.title'),\n+      description: I18n.t('authorization_request_forms.summary.description'),\n+      type: 'warning',\n+      html_attributes: { class: 'fr-mb-4w fr-px-4v' }\n+    )\n+  end\n+\n+  def show_summary_before_submit?\n+    authorization_request.draft? &&\n+      current_user_is_applicant?\n+  end\n+\n+  def current_user_is_applicant?\n+    authorization_request.applicant == current_user\n+  end\n+\n+  def instructor_banner_notice\n+    return unless show_instructor_banner?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: instructor_banner_title,\n+      description: instructor_banner_full_description,\n+      type: instructor_banner_type.to_s,\n+      html_attributes: { class: 'fr-notice--full-width fr-notice--multi-lines fr-mb-4w' }\n+    )\n+  end\n+\n+  def show_instructor_banner?\n+    authorization_request.changes_requested? || authorization_request.refused?\n+  end\n+\n+  def instructor_banner_type\n+    return :alert if authorization_request.refused? || (authorization_request.reopening? && authorization_request.denial.present?)\n+    return :warning if authorization_request.changes_requested?\n+\n+    nil\n+  end\n+\n+  def instructor_banner_title\n+    I18n.t(\"#{instructor_banner_i18n_key}.title\")\n+  end\n+\n+  def instructor_banner_description\n+    I18n.t(\"#{instructor_banner_i18n_key}.description\")\n+  end\n+\n+  def instructor_banner_reason\n+    return authorization_request.modification_request&.reason if authorization_request.changes_requested?\n+    return authorization_request.denial&.reason if instructor_banner_type == :alert\n+\n+    nil\n+  end\n+\n+  def instructor_banner_full_description\n+    description = instructor_banner_description\n+    return description if instructor_banner_reason.blank?\n+\n+    helpers.safe_join([\n+      description,\n+      '<br />'.html_safe,\n+      instructor_banner_reason.gsub(\"\\n\", '<br />').html_safe\n+    ])\n+  end\n+\n+  def instructor_banner_i18n_key\n+    key = if authorization_request.reopening?\n+            instructor_banner_type == :alert ? 'reopening_refused' : 'reopening_changes_requested'\n+          elsif instructor_banner_type == :alert\n+            'refused'\n+          else\n+            'changes_requested'\n+          end\n+    \"authorization_requests.show.#{key}\"\n+  end\n+\n+  def dirty_from_v1_alert\n+    return unless show_dirty_from_v1_alert?\n+\n+    helpers.dsfr_alert(\n+      type: :warning,\n+      title: I18n.t('authorization_requests.show.dirty_from_v1.title'),\n+      html_attributes: { class: 'fr-mb-4w' }"
  },
  {
    "id": 2661807882,
    "path": "app/components/habilitation/user_alerts_component.rb",
    "line": 24,
    "original_line": 24,
    "body": "Suggestion rajouter un delegate : \n```ruby \n    delegate :request, to: :authorization\n```\n\nOn √©viterait des r√©p√©titions de `authorization.request` et on am√©liorerait la lisibilit√©.",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+class Habilitation::UserAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization:, current_user:)\n+    @authorization = authorization\n+    @current_user = current_user\n+    super()\n+  end\n+\n+  def render?\n+    show_update_in_progress_alert? || show_access_callout?\n+  end\n+\n+  def call\n+    safe_join([\n+      update_in_progress_notice,\n+      access_callout\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization, :current_user\n+"
  },
  {
    "id": 2661812470,
    "path": "app/components/habilitation/user_alerts_component.rb",
    "line": 32,
    "original_line": 32,
    "body": "M√™me remarque pour les html_attributes que pour `DemandesAlertsComponent` \n\n",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+class Habilitation::UserAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization:, current_user:)\n+    @authorization = authorization\n+    @current_user = current_user\n+    super()\n+  end\n+\n+  def render?\n+    show_update_in_progress_alert? || show_access_callout?\n+  end\n+\n+  def call\n+    safe_join([\n+      update_in_progress_notice,\n+      access_callout\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization, :current_user\n+\n+  def update_in_progress_notice\n+    return unless show_update_in_progress_alert?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.reopening_alerts.update_in_progress.title'),\n+      description: update_in_progress_message,\n+      type: 'info',\n+      html_attributes: { class: 'fr-notice--full-width fr-mb-4w' }"
  },
  {
    "id": 2661831825,
    "path": "app/components/habilitation/user_alerts_component.rb",
    "line": 60,
    "original_line": 60,
    "body": "üîç Accessibilit√© : \nRajouter un `title` pour les liens s'ouvrant dans une nouvelle page : \n\ntitle=\"intitul√© du lien - nouvelle fen√™tre\"\n",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+class Habilitation::UserAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization:, current_user:)\n+    @authorization = authorization\n+    @current_user = current_user\n+    super()\n+  end\n+\n+  def render?\n+    show_update_in_progress_alert? || show_access_callout?\n+  end\n+\n+  def call\n+    safe_join([\n+      update_in_progress_notice,\n+      access_callout\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization, :current_user\n+\n+  def update_in_progress_notice\n+    return unless show_update_in_progress_alert?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.reopening_alerts.update_in_progress.title'),\n+      description: update_in_progress_message,\n+      type: 'info',\n+      html_attributes: { class: 'fr-notice--full-width fr-mb-4w' }\n+    )\n+  end\n+\n+  def show_update_in_progress_alert?\n+    authorization.latest? && authorization.request.reopening?\n+  end\n+\n+  def update_in_progress_message\n+    I18n.t(\n+      'authorization_request_forms.summary.reopening_alerts.update_in_progress.message',\n+      link: helpers.link_to(\n+        \"Consulter la demande de mise √† jour n¬∞#{authorization.request.id}\",\n+        helpers.authorization_request_path(authorization.request)\n+      )\n+    ).html_safe\n+  end\n+\n+  def access_callout\n+    return unless show_access_callout?\n+\n+    helpers.dsfr_callout(\n+      title: I18n.t('authorization_requests.show.access_callout.title'),\n+      html_attributes: { class: 'fr-my-16v' }\n+    ) do |callout|\n+      callout.with_action_zone do\n+        helpers.link_to(\n+          I18n.t('authorization_requests.show.access_callout.button'),\n+          authorization.request.access_link,"
  },
  {
    "id": 2661855600,
    "path": "app/components/habilitation/user_alerts_component.rb",
    "line": 63,
    "original_line": 63,
    "body": "Suggestion : Selon le Dsfr ajouter l'attribut  `rel=\"noopener external\"`",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+class Habilitation::UserAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization:, current_user:)\n+    @authorization = authorization\n+    @current_user = current_user\n+    super()\n+  end\n+\n+  def render?\n+    show_update_in_progress_alert? || show_access_callout?\n+  end\n+\n+  def call\n+    safe_join([\n+      update_in_progress_notice,\n+      access_callout\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization, :current_user\n+\n+  def update_in_progress_notice\n+    return unless show_update_in_progress_alert?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.reopening_alerts.update_in_progress.title'),\n+      description: update_in_progress_message,\n+      type: 'info',\n+      html_attributes: { class: 'fr-notice--full-width fr-mb-4w' }\n+    )\n+  end\n+\n+  def show_update_in_progress_alert?\n+    authorization.latest? && authorization.request.reopening?\n+  end\n+\n+  def update_in_progress_message\n+    I18n.t(\n+      'authorization_request_forms.summary.reopening_alerts.update_in_progress.message',\n+      link: helpers.link_to(\n+        \"Consulter la demande de mise √† jour n¬∞#{authorization.request.id}\",\n+        helpers.authorization_request_path(authorization.request)\n+      )\n+    ).html_safe\n+  end\n+\n+  def access_callout\n+    return unless show_access_callout?\n+\n+    helpers.dsfr_callout(\n+      title: I18n.t('authorization_requests.show.access_callout.title'),\n+      html_attributes: { class: 'fr-my-16v' }\n+    ) do |callout|\n+      callout.with_action_zone do\n+        helpers.link_to(\n+          I18n.t('authorization_requests.show.access_callout.button'),\n+          authorization.request.access_link,\n+          class: 'fr-btn fr-btn--icon-right fr-icon-external-link-line',\n+          target: '_blank',\n+          rel: 'noopener'"
  },
  {
    "id": 2661867516,
    "path": "app/components/habilitation/user_alerts_component.rb",
    "line": 43,
    "original_line": 43,
    "body": "Question ? \nA t'on besoin d'utiliser helpers pour \n`helpers.link_to` ? \nm√™me question pour `helpers.dsfr_callout`? ",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+class Habilitation::UserAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization:, current_user:)\n+    @authorization = authorization\n+    @current_user = current_user\n+    super()\n+  end\n+\n+  def render?\n+    show_update_in_progress_alert? || show_access_callout?\n+  end\n+\n+  def call\n+    safe_join([\n+      update_in_progress_notice,\n+      access_callout\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization, :current_user\n+\n+  def update_in_progress_notice\n+    return unless show_update_in_progress_alert?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.reopening_alerts.update_in_progress.title'),\n+      description: update_in_progress_message,\n+      type: 'info',\n+      html_attributes: { class: 'fr-notice--full-width fr-mb-4w' }\n+    )\n+  end\n+\n+  def show_update_in_progress_alert?\n+    authorization.latest? && authorization.request.reopening?\n+  end\n+\n+  def update_in_progress_message\n+    I18n.t(\n+      'authorization_request_forms.summary.reopening_alerts.update_in_progress.message',\n+      link: helpers.link_to("
  },
  {
    "id": 2661872336,
    "path": "app/components/habilitation/user_alerts_component.rb",
    "line": 50,
    "original_line": 50,
    "body": "Suggestion:  \nJe d√©composerais d'avantage `access_callout` en extrayant des m√©thodes (access_callout_title / access_callout_button / access_callout_content)  par exemple ",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+class Habilitation::UserAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization:, current_user:)\n+    @authorization = authorization\n+    @current_user = current_user\n+    super()\n+  end\n+\n+  def render?\n+    show_update_in_progress_alert? || show_access_callout?\n+  end\n+\n+  def call\n+    safe_join([\n+      update_in_progress_notice,\n+      access_callout\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization, :current_user\n+\n+  def update_in_progress_notice\n+    return unless show_update_in_progress_alert?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.reopening_alerts.update_in_progress.title'),\n+      description: update_in_progress_message,\n+      type: 'info',\n+      html_attributes: { class: 'fr-notice--full-width fr-mb-4w' }\n+    )\n+  end\n+\n+  def show_update_in_progress_alert?\n+    authorization.latest? && authorization.request.reopening?\n+  end\n+\n+  def update_in_progress_message\n+    I18n.t(\n+      'authorization_request_forms.summary.reopening_alerts.update_in_progress.message',\n+      link: helpers.link_to(\n+        \"Consulter la demande de mise √† jour n¬∞#{authorization.request.id}\",\n+        helpers.authorization_request_path(authorization.request)\n+      )\n+    ).html_safe\n+  end\n+\n+  def access_callout"
  },
  {
    "id": 2661881159,
    "path": "app/components/habilitation/user_alerts_component.rb",
    "line": 70,
    "original_line": 70,
    "body": "Suggestion : \n```ruby\ndef show_access_callout\n  request.access_link.present? && request.validated? && current_user_is_applicant?\nend\n\ndef current_user_is_applicant?\n  current_user == request.applicant\nend\n```",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+class Habilitation::UserAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization:, current_user:)\n+    @authorization = authorization\n+    @current_user = current_user\n+    super()\n+  end\n+\n+  def render?\n+    show_update_in_progress_alert? || show_access_callout?\n+  end\n+\n+  def call\n+    safe_join([\n+      update_in_progress_notice,\n+      access_callout\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization, :current_user\n+\n+  def update_in_progress_notice\n+    return unless show_update_in_progress_alert?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.reopening_alerts.update_in_progress.title'),\n+      description: update_in_progress_message,\n+      type: 'info',\n+      html_attributes: { class: 'fr-notice--full-width fr-mb-4w' }\n+    )\n+  end\n+\n+  def show_update_in_progress_alert?\n+    authorization.latest? && authorization.request.reopening?\n+  end\n+\n+  def update_in_progress_message\n+    I18n.t(\n+      'authorization_request_forms.summary.reopening_alerts.update_in_progress.message',\n+      link: helpers.link_to(\n+        \"Consulter la demande de mise √† jour n¬∞#{authorization.request.id}\",\n+        helpers.authorization_request_path(authorization.request)\n+      )\n+    ).html_safe\n+  end\n+\n+  def access_callout\n+    return unless show_access_callout?\n+\n+    helpers.dsfr_callout(\n+      title: I18n.t('authorization_requests.show.access_callout.title'),\n+      html_attributes: { class: 'fr-my-16v' }\n+    ) do |callout|\n+      callout.with_action_zone do\n+        helpers.link_to(\n+          I18n.t('authorization_requests.show.access_callout.button'),\n+          authorization.request.access_link,\n+          class: 'fr-btn fr-btn--icon-right fr-icon-external-link-line',\n+          target: '_blank',\n+          rel: 'noopener'\n+        )\n+      end\n+      I18n.t('authorization_requests.show.access_callout.content', access_name: authorization.request.name)\n+    end\n+  end\n+\n+  def show_access_callout?"
  },
  {
    "id": 2661890714,
    "path": "app/components/habilitation/user_alerts_component.rb",
    "line": 29,
    "original_line": 29,
    "body": "De fa√ßon g√©n√©rale, je propose de simplifier les appels i18n dans des m√©thodes d√©di√©s pour facilit√© la lecture et r√©duire la complexit√© de ce fichier. \n",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+class Habilitation::UserAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization:, current_user:)\n+    @authorization = authorization\n+    @current_user = current_user\n+    super()\n+  end\n+\n+  def render?\n+    show_update_in_progress_alert? || show_access_callout?\n+  end\n+\n+  def call\n+    safe_join([\n+      update_in_progress_notice,\n+      access_callout\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization, :current_user\n+\n+  def update_in_progress_notice\n+    return unless show_update_in_progress_alert?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.reopening_alerts.update_in_progress.title'),"
  },
  {
    "id": 2661913489,
    "path": "app/components/habilitation/user_alerts_component.rb",
    "line": 44,
    "original_line": 44,
    "body": "On pourrait extraire la traduction du lien ? \nQuelque chose comme \n```ruby\ndef update_in_progress_description\n      I18n.t(\n        'authorization_request_forms.summary.reopening_alerts.update_in_progress.message',\n        link: update_request_link\n      ).html_safe\n    end\n\n    def update_request_link\n      link_to(\n        \"Consulter la demande de mise √† jour n¬∞#{request.id}\",\n        authorization_request_path(request)\n      )\n    end\n```\n\nD'ailleurs il y a du texte qui pourrait √™tre d√©placer dans les locales : \n`Consulter la demande de mise √† jour n¬∞#{request.id}` ",
    "diff_hunk": "@@ -0,0 +1,75 @@\n+class Habilitation::UserAlertsComponent < ApplicationComponent\n+  include Rails.application.routes.url_helpers\n+\n+  def initialize(authorization:, current_user:)\n+    @authorization = authorization\n+    @current_user = current_user\n+    super()\n+  end\n+\n+  def render?\n+    show_update_in_progress_alert? || show_access_callout?\n+  end\n+\n+  def call\n+    safe_join([\n+      update_in_progress_notice,\n+      access_callout\n+    ].compact)\n+  end\n+\n+  private\n+\n+  attr_reader :authorization, :current_user\n+\n+  def update_in_progress_notice\n+    return unless show_update_in_progress_alert?\n+\n+    render DsfrComponent::NoticeComponent.new(\n+      title: I18n.t('authorization_request_forms.summary.reopening_alerts.update_in_progress.title'),\n+      description: update_in_progress_message,\n+      type: 'info',\n+      html_attributes: { class: 'fr-notice--full-width fr-mb-4w' }\n+    )\n+  end\n+\n+  def show_update_in_progress_alert?\n+    authorization.latest? && authorization.request.reopening?\n+  end\n+\n+  def update_in_progress_message\n+    I18n.t(\n+      'authorization_request_forms.summary.reopening_alerts.update_in_progress.message',\n+      link: helpers.link_to(\n+        \"Consulter la demande de mise √† jour n¬∞#{authorization.request.id}\","
  },
  {
    "id": 2661945514,
    "path": "config/locales/components.fr.yml",
    "line": 16,
    "original_line": 16,
    "body": "l‚Äôhabilitation",
    "diff_hunk": "@@ -12,4 +12,6 @@ fr:\n       transfer_modal_title: \"Transf√©rer l'habilitation √† un autre utilisateur de votre organisation\"\n       start_next_stage_title: \"D√©marrer une nouvelle demande d'habilitation pour l'environnement de production\"\n       contact_support_subject: \"Habilitation %{authorization_id} r√©voqu√©e\"\n+      old_version: \"Cette habilitation est obsol√®te, elle a √©t√© remplac√©e par %{link}\"\n+      old_version_link: \"l'habilitation N¬∞%{id}\""
  }
]
