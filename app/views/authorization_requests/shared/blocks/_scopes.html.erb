<%= render layout: 'authorization_requests/shared/blocks/summary_block', locals: { title: f.wording_for('steps.scopes'), block_id: :scopes, f:, editable: } do %>
  <% @authorization_request.available_scopes.group_by(&:group).each do |group_name, scopes| %>
    <div class="fr-form-group scopes-group">
      <h5 class="scopes-group__title">
        <%= group_name %>
      </h5>

      <div class="scopes-group__grid">
        <% scopes.each do |scope| %>
          <%= f.dsfr_scope scope, disabled: true %>
        <% end %>
      </div>
    </div>
  <% end %>

  <% if @authorization_request.legacy_scope_values.any? %>
    <p><%= t('authorization_requests.shared.blocks.scopes.legacy_scopes') %></p>

    <ul>
      <% @authorization_request.legacy_scope_values.each do |legacy_scope_value| %>
        <li><%= legacy_scope_value %></li>
      <% end %>
    </ul>
  <% end %>

  <% if @authorization_request.respond_to?(:specific_requirements) %>
    <h3 class="fr-h5 fr-mt-5w"> <%= t('authorization_request_forms.default.scopes.specific_requirements.title') %></h3>
    <%= f.dsfr_check_box :specific_requirements, disabled: true %>
  <% end %>

  <% if @authorization_request.respond_to?(:specific_requirements_document) && @authorization_request.specific_requirements_document.attached? %>
    <p>
      <strong>
        Document de votre expression de besoin sp√©cifique :
      </strong>
      <br/>
      <%= link_to @authorization_request.specific_requirements_document.filename, url_for(@authorization_request.specific_requirements_document), target: '_blank', class: %w[fr-link--icon-left fr-icon-file-fill] %>
      <% if namespace?(:instruction) %>
        <%= f.dsfr_malware_badge @authorization_request.cadre_juridique_document, class: 'fr-ml-1w' %>
      <% end %>
    </p>
  <% end %>
<% end %>
