<%= render 'authorization_request_forms/build/header' %>

<%= render partial: 'authorization_request_forms/shared/organization' %>

<%= authorization_request_form(@authorization_request) do |f| %>
  <div class="fr-container-fluid">
    <div class="fr-grid-row">
      <% %i[responsable_traitement delegue_protection_donnees].each do |contact_type| %>
        <div class="fr-col-12 fr-col-lg-6">
          <div id="<%= dom_id(@authorization_request, contact_type) %>" class="fr-basic-card">
            <h3>
              <%= t("authorization_request_forms.default.#{contact_type}.title") %>
            </h3>

            <fieldset class="fr-fieldset" aria-label="feedme" aria-describedby="name-1-fieldset-messages">
              <% @authorization_request.class.contact_attributes.each do |contact_attribute| %>
                <div class="fr-fieldset__element">
                  <% if contact_attribute == 'email' %>
                    <%= f.dsfr_email_field("#{contact_type}_#{contact_attribute}") %>
                  <% else %>
                    <%= f.dsfr_text_field("#{contact_type}_#{contact_attribute}") %>
                  <% end %>
                </div>
              <% end %>
            </fieldset>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <%= render partial: 'authorization_request_forms/shared/tos_checkboxes', locals: { f: f } %>
  <%= render partial: 'authorization_request_forms/shared/submit_buttons', locals: { f: f } %>
<% end %>
