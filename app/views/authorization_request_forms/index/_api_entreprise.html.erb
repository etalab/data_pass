<h3>
  Qui se charge techniquement de l'intÃ©gration de l'API ?
</h3>

<div
  class="fr-mb-2w"
  data-controller="choose-authorization-request-form"
  data-choose-authorization-request-form-editors-value="<%= @authorization_definition.editors.map(&:id).to_json %>"
  <% if params[:use_case] %>
    data-choose-authorization-request-form-target-use-case-value="<%= params[:use_case] %>"
  <% end %>
>
  <fieldset class="fr-fieldset" aria-labelledby="radio-rich-inline-legend radio-rich-inline-messages">
    <div class="fr-grid-row">
      <div class="fr-col-md-4 fr-col-12">
        <div class="fr-fieldset__element fr-fieldset__element">
          <div class="fr-radio-group fr-radio-rich">
            <input type="radio" id="team-internal" data-action="click->choose-authorization-request-form#chooseTeam" value="internal" name="team">
            <label class="fr-label" for="team-internal">
              Vos dÃ©veloppeurs internes ou prestataires
              <span class="fr-hint-text">
                Ils conÃ§oivent une solution logicielle sur-mesure pour votre organisation
              </span>
            </label>
          </div>
        </div>
      </div>

      <div class="fr-col-md-4 fr-col-12">
        <div class="fr-fieldset__element fr-fieldset__element">
          <div class="fr-radio-group fr-radio-rich">
            <input type="radio" id="team-editor" value="editor" data-action="click->choose-authorization-request-form#chooseTeam" name="team">
            <label class="fr-label" for="team-editor">
              Votre Ã©diteur
              <span class="fr-hint-text">
                Rien Ã  coder, vous utilisez une solution clÃ© en main proposÃ©e par un Ã©diteur.
              </span>
            </label>
          </div>
        </div>
      </div>

      <div class="fr-col-md-4 fr-col-12">
        <div class="fr-fieldset__element fr-fieldset__element">
          <div class="fr-radio-group fr-radio-rich">
            <input type="radio" id="team-none" value="none" data-action="click->choose-authorization-request-form#chooseTeam"  name="team">
            <label class="fr-label" for="team-none">
              Ni Ã©quipe technique, ni Ã©diteur
              <span class="fr-hint-text">
                Vous traitez tout manuellement.
              </span>
            </label>
          </div>
        </div>
      </div>
    </div>
  </fieldset>

  <div data-choose-authorization-request-form-target="editors" id="editors-list" class="fr-hidden">
    <h3>
      Quel est votre Ã©diteur de logiciel ?
    </h3>
    <fieldset class="fr-fieldset" id="editors" aria-labelledby="radio-hint-legend radio-hint-messages">
      <%
        @authorization_definition.editors.each do |editor|
      %>
        <div class="fr-fieldset__element">
          <div class="fr-radio-group">
            <input type="radio" id="<%= dom_id(editor) %>" data-action="click->choose-authorization-request-form#chooseEditor" value="<%= editor.id %>" name="editor">
            <label class="fr-label" for="<%= dom_id(editor) %>">
              <%= editor.name %>
            </label>
          </div>
        </div>
      <% end %>

      <%
        [
          "Achatpublic - achatpublic.com",
          "Actradis",
          "Arnia - Pack commande publique",
          "Atline Services - marches-securises.fr",
          "AWS - AWS-achat",
          "Axyus",
          "Dematis - e-marchespublics.com",
          "Entr'ouvert - Publik",
          "Klekoon - klekoon.com",
          "Maximilien",
          "Megalis Bretagne",
          "PICTAV Informatique",
          "SmartGlobal - Smart Global Governance",
          "Solution Attestations",
        ].each do |editor_already_integrated|
      %>
        <div class="fr-fieldset__element">
          <div class="fr-radio-group">
            <input type="radio" id="<%= editor_already_integrated.parameterize %>" data-action="click->choose-authorization-request-form#chooseEditor" value="editor_already_integrated" name="editor">
            <label class="fr-label" for="<%= editor_already_integrated.parameterize %>">
              <%= editor_already_integrated %>
            </label>
          </div>
        </div>
      <% end %>

      <div class="fr-fieldset__element">
        <div class="fr-radio-group">
          <input type="radio" id="no_editor"  data-action="click->choose-authorization-request-form#chooseEditor" value="none" name="editor">
          <label class="fr-label" for="no_editor">
            Aucun de ces Ã©diteurs
          </label>
        </div>
      </div>
    </fieldset>
  </div>

  <div data-choose-authorization-request-form-target="forms" id="forms" class="fr-bg-alt-blue-france fr-hidden">
    <p class="center fr-px-5w fr-py-1w">
      Il existe plusieurs formulaires pour obtenir une habilitation Ã  <%= @authorization_definition.name %>, vos rÃ©ponses ont permis de rÃ©duire le choix aux formulaires ci-dessous.
      <br />
      <br />
      En cas de doute, nous vous invitons Ã  consulter le site d'<a href="https://entreprise.api.gouv.fr" target="_blank">API Entreprise</a>, plus spÃ©cifiquement la page des <a href="https://entreprise.api.gouv.fr/cas_usages" target="_blank">cas d'usages</a>.

    </p>

    <div class="fr-grid-row">
      <% @authorization_definition.available_forms.map(&:decorate).each do |authorization_request_form| %>
        <div data-choose-authorization-request-form-target="form" data-choose-authorization-request-form-tags="<%= authorization_request_form.tags.to_json %>" class="fr-col-md-6 fr-col-xl-4 fr-col-12 fr-p-3w">
          <%= render partial: 'authorization_request_forms/authorization_request_form_card', locals: { authorization_request_form: } %>
        </div>
      <% end %>
    </div>
  </div>

  <div data-choose-authorization-request-form-target="noTeamDisclaimer" class="fr-bg-alt-blue-france fr-hidden">
    <div class="center fr-px-5w fr-py-1w">
      Vous Ãªtes Ã©ligible mais n'avez pas les <a href="https://entreprise.api.gouv.fr/developpeurs#prerequis-techniques" target="_blank">prÃ©requis techniques</a> pour utiliser lâ€™API Entreprise

      <br />

      ğŸ” Lâ€™API Entreprise sâ€™utilise au travers dâ€™un logiciel mÃ©tier, comme par exemple un profil acheteur pour les marchÃ©s publics. Si vous collectez et traitez les donnÃ©es Ã  la main, vous nâ€™avez probablement pas un logiciel dÃ©diÃ© aux dÃ©marches.

      <br />

      <div class="fr-alert fr-alert--info fr-mt-4v">
        <h3 class="fr-alert__title">
          ğŸ NouveautÃ© ! Faites partie des 1ers utilisateurs de Â« l'espace agent public Â» de l'annuaire des entreprises
        </h3>

        Vous devez vÃ©rifier les informations financiÃ¨res, fiscales et sociales des entreprises-associations ? Votre cadre juridique le permet ?
        <br />
        â¡ï¸ C'est possible en 1 clic en remplissant <a href="https://form.typeform.com/to/ol1jlpdf" target="_blank">ce questionnaire</a>
      </div>

      <br />

      Autrement, vous pouvez contacter des Ã©diteurs de logiciel ayant dÃ©jÃ  intÃ©grÃ© lâ€™API Entreprise :
      <a class="btn btn--lg btn--secondary" href="https://entreprise.api.gouv.fr/cas_usages/aides_publiques/#parfois-au-travers-dun-%C3%A9diteur-de-logiciel-" target="_blank">Liste des Ã©diteurs Aides Publiques</a>
      <a class="btn btn--lg btn--secondary" href="https://entreprise.api.gouv.fr/cas_usages/marches_publics#parfois-au-travers-dun-Ã©diteur-de-logiciel-" target="_blank">Liste des Ã©diteurs MarchÃ©s Publics</a>
    </div>
  </div>

  <div data-choose-authorization-request-form-target="noEditorDisclaimer" id="no-editor-disclaimer" class="fr-bg-alt-blue-france fr-hidden">
    <p class="center fr-px-5w fr-py-1w">
      Vous Ãªtes Ã©ligible mais votre Ã©diteur ne semble pas utiliser l'API Entreprise, ou son intÃ©gration ne nÃ©cessite aucune action de votre part.

      <br />

      Nous vous invitons Ã  nous contacter Ã  l'adresse suivante : <a href="mailto:support@entreprise.api.gouv.fr">support@entreprise.api.gouv.fr</a> afin que l'on puisse vous
      accompagner au mieux
    </p>
  </div>

  <div data-choose-authorization-request-form-target="editorAlreadyIntegrated" id="editor-alread-integrated-disclaimer" class="fr-bg-alt-blue-france fr-hidden">
    <p class="center fr-px-5w fr-py-1w">
      <strong>Bonne nouvelle ! Vous Ãªtes Ã©ligible et votre Ã©diteur/profil acheteur a dÃ©jÃ  intÃ©grÃ© lâ€™API Entreprise. ğŸ‘</strong>

      <br />

      Vous nâ€™avez plus quâ€™Ã  vous adresser directement Ã  votre Ã©diteur.
    </p>
  </div>
</div>
